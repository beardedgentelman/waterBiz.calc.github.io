<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com"></script>
    <title>Water Biz</title>
    <style>
      body {
        font-family: "Poppins", sans-serif;
        color: #272727;
      }
    </style>
  </head>
  <body>
    <div class="mx-auto h-[100svh] overflow-hidden">
      <header class="w-full px-3 pt-3 pb-4 bg-[#d5dedd] flex items-center justify-between">
        <a href="#" class="w-10 flex items-baseline">
          <img class="w-full" src="logo_clear.png" alt="logo" />
          <span class="text-5xl font-bold text-gray-600 ml-2">WaterBiz</span>
        </a>
        <a href="#" class="py-2 px-3">
          <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="20px" height="20px" viewBox="0 0 512 512" style="enable-background: new 0 0 512 512" xml:space="preserve">
            <g>
              <path
                d="M256,0C114.615,0,0,114.615,0,256s114.615,256,256,256s256-114.615,256-256S397.385,0,256,0z M256,464
              c-114.875,0-208-93.125-208-208S141.125,48,256,48s208,93.125,208,208S370.875,464,256,464z M224,128h64v64h-64V128z M320,384H192
              v-32h32v-96h-32v-32h96v128h32V384z"
                fill="#7a7a7a"
              />
            </g>
          </svg>
        </a>
      </header>
      <main class="py-5 px-4 flex flex-col justify-between" style="height: calc(100svh - 76px)">
        <div class="w-full py-2 px-4 border border-gray-300 rounded-md flex flex-col justify-center gap-5 mx-auto text-lg bg-gradient-to-r from-indigo-50 to-indigo-100 font-bold">
          <span class="store_chain text-xl uppercase"></span>
          <span>Автомат №<span class="machine_number"></span></span>
          <span class="address"></span>
          <div class="flex w-full justify-center gap-6">
            <span class="water_name"></span>
            <span><span class="water_price"></span> грн./літр</span>
          </div>
        </div>
        <form>
          <div class="flex justify-between items-center">
            <div class="flex flex-col grow items-center relative">
              <div class="flex items-baseline py-[5%] px-4 w-full">
                <input id="water_input" type="number" pattern="\d+(\.\d{1})?" min="0" max="60" step="0.1" class="w-[125px] outline-none focus:outline-none text-center text-6xl font-bold text-md border-b border-gray-400 focus:text-black flex items-center" name="water_input" value="0" /><span class="ml-2 font-bold">літрів</span>
                <div id="water_error" class="absolute -top-[20px] w-max py-2 px-4 rounded-lg bg-indigo-100" style="display: none">
                  <span class="text-red-600 font-bold">Максимум 60 літрів</span>
                </div>
              </div>
              <div class="flex items-baseline py-[5%] px-4 w-full">
                <input id="water_input_price" type="number" pattern="\d+(\.\d{1})?" min="0" max="60" step="1" class="w-[125px] outline-none focus:outline-none text-center text-6xl font-bold text-md border-b border-gray-400 focus:text-black flex items-center" name="water_input_price" value="0" /><span class="ml-2 font-bold">грн.</span>
                <div id="water_price_error" class="absolute -top-[20px] w-max py-2 px-4 rounded-lg bg-indigo-100" style="display: none">
                  <span class="text-red-600 font-bold">Максимум 60 грн.</span>
                </div>
              </div>
            </div>
            <div class="flex flex-col h-max -rotate-90 pb-11">
              <label for="steps_range" class="mb-2 text-sm font-medium text-gray-900 dark:text-white leading-none relative">
                <span class="rotate-90 absolute -top-[15px] left-0">0-</span>
                <span class="rotate-90 absolute -top-[15px] left-1/4 -translate-x-1/4">15-</span>
                <span class="rotate-90 absolute -top-[15px] left-1/2 -translate-x-1/2">30-</span>
                <span class="rotate-90 absolute -top-[15px] left-3/4 -translate-x-3/4">45-</span>
                <span class="rotate-90 absolute -top-[15px] -right-[5px]">60-</span>
              </label>
              <input id="steps_range" type="range" min="0" max="60" value="0" step="0.1" class="w-[250px] h-6 accent-indigo-400 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700" />
            </div>
          </div>
          <button type="submit" id="submit" class="block py-2 px-6 mt-16 w-[60%] mx-auto text-center bg-indigo-400 active:bg-indigo-700 text-xl font-bold text-white rounded-lg">OK</button>
        </form>
      </main>
    </div>
  </body>

  <script>
    window.addEventListener("load", () => {
      const storeChain = document.querySelector(".store_chain");
      const machineNumber = document.querySelector(".machine_number");
      const address = document.querySelector(".address");
      const waterName = document.querySelector(".water_name");
      // const waterPrice = document.querySelector(".water_price");
      const waterPrice = 0.5;

      const waterInput = document.getElementById("water_input");
      const waterInputPrice = document.getElementById("water_input_price");
      const waterError = document.getElementById("water_error");
      const waterPriceError = document.getElementById("water_price_error");
      const max = 60;
      const rangeInput = document.getElementById("steps_range");

      const submitBtn = document.getElementById("submit");

      waterInput.addEventListener("input", function () {
        let value = parseFloat(this.value);
        rangeInput.value = value;
        if (isNaN(value)) {
          this.value = "";
        } else if (value > max) {
          this.value = 0;
          waterError.style.display = "block";
        } else {
          waterError.style.display = "none";
        }
        if (this.value === "") {
          this.value = 0;
        }

        waterInputPrice.value = value / waterPrice;
      });

      rangeInput.addEventListener("input", function () {
        const value = parseFloat(this.value);
        waterInput.value = value;

        if (value <= 20) {
          rangeInput.step = 0.1;
        } else if (value <= 40) {
          rangeInput.step = 0.5;
        } else {
          rangeInput.step = 1;
        }

        waterInputPrice.value = value * waterPrice;
      });

      waterInputPrice.addEventListener("input", function () {
        let value = parseFloat(this.value);
        if (isNaN(value)) {
          this.value = "";
        } else if (value > max) {
          this.value = 0;
          waterPriceError.style.display = "block";
        } else {
          waterPriceError.style.display = "none";
        }
        if (this.value === "") {
          this.value = 0;
        }

        waterInput.value = value * waterPrice;
        rangeInput.value = waterInput.value;
      });

      function setInfo() {
        storeChain.innerHTML = "Назва мережі";
        machineNumber.innerHTML = "00";
        address.innerHTML = "Адресса";
        waterName.innerHTML = "Вид води";
        waterPrice.innerHTML = "00";
      }

      setInfo();
      submitBtn.addEventListener("click", function () {
        console.log(`Water count: ${waterInput.value}, Coast: ${waterInputPrice.value}`);
      });
    });
  </script>
</html>
